<link rel="import" href="polymer/polymer-element.html">
<link rel="import" href="paper-button/paper-button.html">

<dom-module id="element-export">
  <template>
    <style include="optinomic-styles">
      :host {
        display: block;
      }

    </style>

    <div class="horizontal">
      <p>Element-Export</p>
      <template is="dom-if" if="[[autorequest]]" restamp="true">
        <paper-button class="grey" on-click="_loadData">Loaded...</paper-button>
      </template>
      <template is="dom-if" if="[[!autorequest]]" restamp="true">
        <paper-button class="grey" on-click="_loadData">Load</paper-button>
      </template>

    </div>

  </template>

  <script>

    class elementExport extends Polymer.mixinBehaviors([opappBehavior], ReduxBehavior(Polymer.Element)) {

      static get is() {
        return 'element-export';
      }

      static get actions() {
        return AsyncActionsBehavior.actions;
      }

      // Properties
      static get properties() {
        return {

          definition: {
            type: Object
          },

          autorequest: {
            type: Boolean,
            value: false
          }
        };
      }

      // --------------- Functions ---------------

      _loadData() {
        this._debouncer = Polymer.Debouncer.debounce(this._debouncer, Polymer.Async.timeOut.after(250), () => {
          if ((this.definition !== null) && (this.definition !== undefined)) {
            Polymer.RenderStatus.afterNextRender(this, function () {

              console.log('_loadData', this.definition, this.autorequest);
              // this.dispatch('actionGetUserAppCalculation', this.definition.options.userapp_id, this.definition.options.userapp_calculation_id);

            });
          };

        });
      }

      // --------------- Lifecycle ---------------

      _init() {
        // console.warn('_init :: Export-Toolbox');
      }

      ready() {
        super.ready();
        this._init();
      }
    }

    window.customElements.define(elementExport.is, elementExport);
  </script>
</dom-module>
