<head>
    <script src="webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="iron-icons/iron-icons.html">
    <link rel="import" href="paper-icon-button/paper-icon-button.html">
    <link rel="import" href="paper-button/paper-button.html">
</head>
<dom-module id="optinomic-app">
    <template>
        <style include="shared-styles">
        :host {
            display: block;
            padding: 10px;
        }
        </style>
        <div class="">
            <div class="circle">12</div>
            <h1>[[params.appName]]</h1>
            <p>{{params.userID}}. [[params.appName]]</p>
        </div>
        <div id="container">
            <paper-button on-tap="helpersRun" class="pink">link</paper-button>
            <paper-button on-tap="helpersRun" raised class="indigo">raised</paper-button>
            <paper-button on-tap="helpersRun" toggles raised class="green">toggles</paper-button>
            <paper-button on-tap="helpersRun" disabled class="disabled">disabled</paper-button>
        </div>
        <div id="container">
            <paper-icon-button on-tap="callAPI" icon="favorite"></paper-icon-button>
            <paper-icon-button on-tap="callAPI" icon="menu" class="indigo"></paper-icon-button>
            <paper-icon-button on-tap="callAPI" icon="star"></paper-icon-button>
        </div>
    </template>
    <script>
    Polymer({
        is: 'optinomic-app',
        ready: function() {
            console.log(this.localName + '#' + this.id + ' has local DOM initialized');
            this.params = {
                "userID": helpers.getUserID(),
                "patientID": helpers.getPatientID(),
                "stayID": helpers.getStayID(),
                "token": helpers.getToken(),
                "appName": helpers.getAppName(),
                "appID": helpers.getAppID(),
                "apiURL": helpers.getApiURL(),
            };
        },
        helpersRun: function() {
            console.log('HELLO: helpersRun!');
            console.log('getUserID() = ', helpers.getUserID());
            console.log('getPatientID() = ', helpers.getPatientID());
            console.log('getStayID() = ', helpers.getStayID());
            console.log('getToken() = ', helpers.getToken());
            console.log('getAppName() = ', helpers.getAppName());
            console.log('getAppID() = ', helpers.getAppID());
            console.log('getApiURL() = ', helpers.getApiURL());
        },
        callAPI: function() {
            console.log('HELLO: callAPI!');
            helpers.callAPI('GET', '/clinic', {}, {}, function(req) {
                if (req.status == 200) {
                    var response = JSON.parse(req.response);
                    console.log('The response is ', response);
                } else {
                    console.err('Error: Failed with status code', req.status);
                }
            });
        }
    });
    </script>
</dom-module>
