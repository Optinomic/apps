include(../lib/html/optinomic/page/start.m4)
<md-content ng-if="d.haveData">
    <h3 class="md-headline">Normgruppen | Einstellungen</h3>
    <p class="md-subhead">{{d.dataMain.patient.data.extras.name}} ({{d.dataMain.patient.data.extras.birthday}}): Alter: {{d.dataMain.patient.data.extras.age}} | <span ng-if="d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.education_high">Hoher Ausbildsgrad</span><span ng-if="!d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.education_high">Nigriger Ausbildsgrad</span> ({{d.dataMain.survey_responses[0].calculations[0].calculation_result.edu_years}} Jahre)</p>
    <div ng-if="d.zScore.init" layout="row" layout-align="space-between start" style="margin-top: 24px;">
        <div flex style="margin-right:12px;">
            <p class="md-title">{{d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.altersgruppe_text}} </p>
            <p class="md-subhead">
                <span ng-if="d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.education_high">Hoher Ausbildsgrad (> 12 Jahre)</span><span ng-if="!d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.education_high">Nigriger Ausbildsgrad (<= 12 Jahre)</span> | n={{d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.n}}
            </p>
            <p class="md-subhead">Die Z-Werte sind nach Alter und Bildung nach Tombaugh 2004 normiert.</p>
            <md-switch ng-model="d.zScore.toggles.show_text" ng-change="setZScore()" aria-label="Zeige Beschriftungstext">
                Zeige Beschriftungstext
            </md-switch>
        </div>
        <div flex>
            <p class="md-title">{{d.dataMain.config.data.customer.contact.name}} | Klinische Normierung</p>
            <p class="md-subhead"><span ng-attr-style="font-size:24px; color:{{d.zScore.global.clinicsample_color}}!important;">■</span> Die klinische Stichproben sind nach Alter und Bildung normiert: n=?</p>
            <md-input-container class="md-block" style="margin-top: 12px;">
                <label>Patientengruppe</label>
                <md-select ng-model="d.zScore.normgruppe_klinik.selected_pg_id" ng-change="setZScore()">
                    <md-option ng-value="null">
                        Keine klinische Stichprobe gewählt
                    </md-option>
                    <md-option ng-repeat="pg in d.dataMain.patient_groups" ng-value="pg.id">
                        {{pg.data.name}}
                    </md-option>
                </md-select>
            </md-input-container>
        </div>
    </div>
    <div ng-if="d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.altersgruppe_found">
        <h3 class="md-headline">TMT A</h3>
        <z-score data="d.zScore.tmt_a.eintritt"></z-score>
        <z-score data="d.zScore.tmt_a.austritt"></z-score>
    </div>
    <div layout="row" layout-align="space-between start" layout-margin ng-repeat="response in d.dataMain.survey_responses">
        <div layout="column" layout-align="start center">
            <p class="md-caption">{{response.calculations[0].calculation_result.Messzeitpunkt.Messzeitpunkt_Text}}</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.entity.data.response.Date | date}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">TMT A: Zeit</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.TMTATime}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">TMT A: Fehler</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.TMTAError}}</p>
        </div>
        <div layout="column" layout-align="start center" ng-if="response.calculations[0].calculation_result.percentile.result.calculated">
            <p class="md-caption">TMT A: Perzentile</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.percentile.result.A}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">B/A: Quotient</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.quotient_rounded}}</p>
        </div>
    </div>
    <div ng-if="d.dataMain.survey_responses[0].calculations[0].calculation_result.percentile.age_perz.altersgruppe_found" style="margin-top: 24px;">
        <h3 class="md-headline">TMT B</h3>
        <z-score data="d.zScore.tmt_b.eintritt"></z-score>
        <z-score data="d.zScore.tmt_b.austritt"></z-score>
    </div>
    <div ng-repeat="response in d.dataMain.survey_responses" layout="row" layout-align="space-between start" layout-margin>
        <div layout="column" layout-align="start center">
            <p class="md-caption">{{response.calculations[0].calculation_result.Messzeitpunkt.Messzeitpunkt_Text}}</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.entity.data.response.Date | date}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">TMT B: Zeit</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.TMTBTime}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">TMT B: Fehler</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.TMTBError}}</p>
        </div>
        <div layout="column" layout-align="start center" ng-if="response.calculations[0].calculation_result.percentile.result.calculated">
            <p class="md-caption">TMT B: Perzentile</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.percentile.result.B}}</p>
        </div>
        <div layout="column" layout-align="start center">
            <p class="md-caption">B/A: Quotient</p>
            <p class="md-subhead" style="margin-top:-12px;">{{response.calculations[0].calculation_result.quotient_rounded}}</p>
        </div>
    </div>
</md-content>
<div ng-if="!d.haveData">
    <h3 class="md-headline">Keine Daten</h3>
    <h3 class="md-subhead">Kein Assessment | Messungen vorhanden.</h3>
</div>
include(../lib/html/optinomic/page/end.m4)
