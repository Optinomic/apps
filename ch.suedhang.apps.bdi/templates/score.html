include(../lib/html/optinomic/page/start.m4)
<div ng-init="d.navigator = 0">
    <md-card>
        <md-card-title style="background-color: #424242; color: #FAFAFA">
            <md-card-title-text>
                <span class="md-headline">
                    {{d.dataMain.apps.current.name}}
                </span>
            </md-card-title-text>
        </md-card-title>
        <md-card-content layout-margin>
            <p>&nbsp;</p>
            <h3 ng-if="d.dataMain.calculations[0].calculation_results[d.navigator].response.data.response.Erhebungszeitpunkt === '1'" class="md-subhead">Eintritt</h3>
            <h3 ng-if="d.dataMain.calculations[0].calculation_results[d.navigator].response.data.response.Erhebungszeitpunkt === '2'" class="md-subhead">Austritt</h3>
            <h3 ng-if="d.dataMain.calculations[0].calculation_results[d.navigator].response.data.response.Erhebungszeitpunkt === '3'" class="md-subhead">{{d.dataMain.calculations[0].calculation_results[d.navigator].response.data.response.andererZeitpunkt}}</h3>
            <div layout="row" layout-gt-xs="row" layout-align="start center" layout-margin>
                <div flex>
                    <score-threshold score="d.dataMain.calculations[0].calculation_results[d.navigator].score.score" min="0" max="63" show-percent-scale="true" scale-ranges="scale_ranges" show-min-max="true"></score-threshold>
                </div>
            </div>
            <div layout="row" layout-align="start start">
                <div flex="60">
                    <h5 class="md-subhead">Interpretation</h5>
                    <p class="md-display-1" ng-attr-style="color:{{d.dataMain.calculations[0].calculation_results[d.navigator].score.current_range.result_color}}">{{d.dataMain.calculations[0].calculation_results[d.navigator].score.current_range.interpretation_de}}</p>
                    <p class="md-caption" style="margin-top: -8px;">{{d.dataMain.calculations[0].calculation_results[d.navigator].score.current_range.interpretation_en}} (Î£{{d.dataMain.calculations[0].calculation_results[d.navigator].score.score}})</p>
                </div>
                <div flex="40">
                    <h5 class="md-subhead">BDI-II Summenwerte und Interpretation</h5>
                    <table class="table table-condensed" style="width: 80%;">
                        <tr ng-repeat="range in scale_ranges.ranges">
                            <td style="text-align:right !important;">
                                <small>{{range.from}}-{{range.to}}&nbsp;</small>
                            </td>
                            <td>
                                <small>{{range.result}}</small>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </md-card-content>
        <md-divider></md-divider>
        <md-card-actions layout-gt-xs="row" layout-align="start center">
            <md-button ng-if="d.dataMain.calculations[0].calculation_results.length > 1" class="md-icon-button md-accent" aria-label="Prev" ng-click="prev()">
                <i class="mdi mdi-chevron-left"></i>
            </md-button>
            <p flex class="md-subhead" style="text-align:center;">{{d.dataMain.calculations[0].calculation_results[d.navigator].response.data.response.Datum | date}} ({{d.navigator + 1}}/{{d.dataMain.calculations[0].calculation_results.length}})</p>
            <md-button ng-if="d.dataMain.calculations[0].calculation_results.length > 1" class="md-icon-button md-accent" aria-label="Next" ng-click="next()">
                <i class="mdi mdi-chevron-right"></i>
            </md-button>
        </md-card-actions>
    </md-card>
</div>
include(../lib/html/optinomic/page/end.m4)
